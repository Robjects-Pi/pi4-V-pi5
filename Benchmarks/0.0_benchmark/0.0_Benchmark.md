
# Benchmark #0: test of all metrics with noterminal output to a file

## Test Setup

### Control Variables

- Both Raspberry Pi 4 and Raspberry Pi 5 are brand new and have never been utilized.
- The software that's going to be incorporated is the exact same on both devices.
- Both devices are powered by their respective power supplies (3 A vs 5 A).
- Both devices are equipped with the standard Raspberry Pi fan with PWM control capabilities HOWEVER, we will conduct the 2 test without the fan with each microcontroller to see if the fan has any effect on the performance.
- Both devices are connected to the same network and and will utilize only the wireless connection for the tests.
- Both devices are connected to the will have no external devices connected to them during the tests besides power and the wireless connection (we will modify this in the next benchmarks).
- Both devices are running the latest version of Raspberry Pi OS (64-bit) with all updates installed. 
- Both devices are running the same version of the benchmarking software.
- Both devices will be in the same room with the same ambient temperature with the Rpi fan attached but turned off.
- Both rpis have metal enclosures for optimal heat dissapation. 
- And lastly, we
- Both devices are connected to the same network and will utilize only the wireless connection for the tests.
- both devices are connected to the will have no external devices connected to them during the tests besides power and the wireless connection (we will modify this in the next benchmarks).


To benchmark the CPU performance of a Raspberry Pi, several tools are highly recommended. Here are some of the best tools you can use:

## **1. Sysbench**

**Sysbench** is a versatile benchmarking tool that can test CPU, memory, and I/O performance. It's widely used for its simplicity and effectiveness.

### **Installation**
```bash
sudo apt-get install sysbench
```

### **Usage**
- **Single-Threaded CPU Test**:
  ```bash
  sysbench --test=cpu --cpu-max-prime=20000 run
  ```
- **Multi-Threaded CPU Test**:
  ```bash
  sysbench --test=cpu --cpu-max-prime=20000 --num-threads=4 run
  ```

## **2. Stress-ng**

**Stress-ng** is another powerful tool that can stress test various system components, including the CPU. It provides more detailed stress testing options compared to Sysbench.

### **Installation**
```bash
sudo apt-get install stress-ng
```

### **Usage**
- **CPU Stress Test**:
  ```bash
  stress-ng --cpu 4 --cpu-method matrixprod --timeout 300s
  ```

## **3. PassMark PerformanceTest**

**PassMark PerformanceTest** is a comprehensive benchmarking tool that can be used to compare the Raspberry Pi's performance against other systems.

### **Installation**
Download the Linux version from the PassMark website and follow the installation instructions.

### **Usage**
Run the benchmark using the command:
```bash
./pt_linux_arm64 -r 3
```

## **4. Geekbench**

**Geekbench** is a cross-platform benchmarking tool that provides a detailed analysis of CPU and GPU performance.

### **Installation**
Download the latest version of Geekbench for ARM Linux from the official website.

### **Usage**
Extract the downloaded file and run:
```bash
./geekbench6
```

## **5. Linpack**

**Linpack** is a benchmark that measures a system's floating-point computing power.

### **Installation and Usage**
Download the Linpack source code, compile it, and run the benchmark:
```bash
wget http://www.netlib.org/benchmark/linpackc.new
mv linpackc.new linpack.c
cc -O3 -o linpack linpack.c -lm
./linpack
```

## **6. Vcgencmd**

**Vcgencmd** is a command-line tool specific to Raspberry Pi that can be used to monitor CPU temperature and clock speed during stress tests.

### **Usage**
Create a script to monitor CPU temperature and clock speed:
```bash
#!/bin/bash
echo "Timestamp,CPU Temperature (Â°C),CPU Clock Speed (MHz),CPU Throttled" > benchmark.csv
for i in {1..60}; do
  timestamp=$(date +"%Y-%m-%d %H:%M:%S")
  cpu_temp=$(vcgencmd measure_temp | cut -d= -f2 | cut -d\' -f1)
  cpu_freq=$(vcgencmd measure_clock arm | cut -d= -f2)
  cpu_throttled=$(vcgencmd get_throttled | cut -d= -f2)
  echo "$timestamp,$cpu_temp,$cpu_freq,$cpu_throttled" >> benchmark.csv
  sleep 1
done
```



## Benchmark 1: Performance Under Load

### Introduction
- **Goals and Objectives**: Evaluate the system's performance under high load conditions to identify potential bottlenecks.
- **System Configuration**: Both Raspberry Pi 4 and Raspberry Pi 5 are brand new, running the latest version of Raspberry Pi OS (64-bit) with all updates installed. Both devices are powered by their respective power supplies (3 A vs 5 A) and equipped with standard Raspberry Pi fans, though tests will be conducted without the fans initially.

### Methodology
- **Process**: Tools used include Sysbench, Stress-ng, and PassMark PerformanceTest.
- **Test Scenarios**: Single-threaded and multi-threaded CPU tests, stress tests, and comprehensive performance tests using PassMark.

### Results
- **Data Presentation**: Include graphs and tables showing performance metrics from Sysbench and Stress-ng.
- **Analysis**: Highlight key findings such as performance differences between Raspberry Pi 4 and Raspberry Pi 5 under load.

### Discussion
- **Interpretation**: Discuss the system's behavior under load and any performance issues identified.
- **Bottlenecks**: Identify specific areas where performance degraded, such as thermal throttling or power supply limitations.

### Conclusion and Recommendations
- **Summary**: Recap the main findings of the benchmark.
- **Recommendations**: Suggest improvements such as better cooling solutions or power supply upgrades.



## **Conclusion**

Each of these tools offers unique features and strengths, making them suitable for different benchmarking needs. For a comprehensive analysis, it is advisable to use a combination of these tools to get a well-rounded view of your Raspberry Pi's CPU performance.










